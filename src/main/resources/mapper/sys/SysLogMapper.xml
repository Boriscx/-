<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cy.pj.sys.dao.SysLogDao">

    <insert id="insertObject" parameterType="com.cy.pj.sys.entity.SysLog" flushCache="true">
        INSERT INTO sys_logs( username, operation, method, params, time, ip, createdTime)
        values (#{username}, #{operation}, #{method}, #{params}, #{time}, #{ip}, #{createdTime})
    </insert>

    <select id="findPageObjects" resultType="com.cy.pj.sys.entity.SysLog" >
        select id, username, operation, method, params, time, ip, createdTime
        from sys_logs
        <where>
            <if test="key!=null and key != ''">
                username like concat("%", #{key}, "%")
            </if>
        </where>
        order by createdTime desc limit #{currentIndex},#{pageSize}
    </select>

</mapper>